<app-data-table
  [columns]="columns"
  [data]="filteredCategories"
  [loading]="loading"
  [actions]="actions"
  [selectable]="false"
  [viewMode]="viewMode"
  [enableViewToggle]="true"
  searchPlaceholder="البحث في الفئات..."
  emptyMessage="لا توجد فئات متاحة"
  [currentPage]="currentPage"
  [totalPages]="totalPages"
  [totalItems]="totalItems"
  [pageSize]="pageSize"
  (searchChange)="onSearch($event)"
  (sortChange)="onSort($event)"
  (rowClick)="onRowClick($event)"
  (actionClick)="onActionClick($event)"
  (viewModeChange)="onViewModeChange($event)"
  (pageChange)="onPageChange($event)"
  (pageSizeChange)="onPageSizeChange($event)"
>
  <div slot="title" class="header-title">
    <h1>إدارة الفئات</h1>
    <p class="header-subtitle">إدارة وتنظيم فئات المنتجات</p>
  </div>

  <div slot="actions">
    <button class="add-btn category-add-btn" (click)="openAddModal()">
      <div class="btn-icon">
        <i class="material-icons">add</i>
      </div>
      <span class="btn-text">إضافة فئة</span>
      <div class="btn-shine"></div>
    </button>
  </div>
</app-data-table>

<!-- Category Modal -->
<app-category-modal
  *ngIf="isModalOpen"
  [isOpen]="isModalOpen"
  [category]="editingCategory"
  (close)="closeModal()"
  (save)="saveCategory($event)"
/>

<!-- Category Details Modal -->
<app-category-details-modal
  *ngIf="isDetailsModalOpen"
  [isOpen]="isDetailsModalOpen"
  [category]="selectedCategory"
  (close)="closeDetailsModal()"
  (edit)="openEditModalFromDetails($event)"
  (delete)="openDeleteConfirmFromDetails($event)"
/>

<!-- Delete Confirmation Dialog -->
<app-confirm-dialog
  *ngIf="deleteConfirm.isOpen"
  [isOpen]="deleteConfirm.isOpen"
  title="تأكيد الحذف"
  [description]="'هل أنت متأكد من حذف الفئة ' + getCategoryName() + '؟ لا يمكن التراجع عن هذا الإجراء.'"
  confirmText="حذف"
  cancelText="إلغاء"
  (confirm)="confirmDelete()"
  (close)="closeDeleteConfirm()"
/>
