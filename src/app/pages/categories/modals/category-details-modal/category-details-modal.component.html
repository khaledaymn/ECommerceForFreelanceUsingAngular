<div *ngIf="isOpen" class="modal-overlay">
  <div class="modal-container" (click)="$event.stopPropagation()" dir="rtl">
    <!-- Modal Header -->
    <div class="modal-header">
      <div class="header-content">
        <div class="header-icon">
          <i class="material-icons">visibility</i>
        </div>
        <div class="header-text">
          <h2 class="modal-title">تفاصيل الفئة</h2>
          <p class="modal-subtitle">عرض جميع معلومات الفئة</p>
        </div>
      </div>
      <button type="button" class="close-btn" (click)="onClose()">
        <i class="material-icons">close</i>
      </button>
    </div>

    <!-- Modal Body - Two Column Layout (Image Left, Details Right) -->
    <div class="modal-body" *ngIf="category">
      <!-- Left Side - Image -->
      <div class="image-section">
        <div
          *ngIf="category.imageURL; else noImageTemplate"
          class="image-container"
        >
          <img
            [src]="category.imageURL"
            alt="{{category.name}}"
            class="category-image"
            (error)="onImageError($event)"
          />
          <div class="image-overlay">
            <button class="zoom-btn" (click)="openImageZoom()">
              <i class="material-icons">zoom_in</i>
            </button>
          </div>
        </div>

        <ng-template #noImageTemplate>
          <div class="no-image-section">
            <i class="material-icons">image</i>
            <span>لا توجد صورة</span>
          </div>
        </ng-template>
      </div>

      <!-- Right Side - Details -->
      <div class="details-section">
        <!-- Basic Information Card -->
        <div class="info-card">
          <div class="card-header">
            <i class="material-icons">info</i>
            <h3>المعلومات الأساسية</h3>
          </div>
          <div class="card-content">
            <div class="info-grid">
              <div class="info-item">
                <div class="info-label">
                  <i class="material-icons">label</i>
                  اسم الفئة
                </div>
                <div class="info-value">{{ category.name || "غير محدد" }}</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Description Card -->
        <div class="info-card" *ngIf="category.description">
          <div class="card-header">
            <i class="material-icons">description</i>
            <h3>الوصف</h3>
          </div>
          <div class="card-content">
            <div class="info-value description-text">
              {{ category.description }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Footer -->
    <div class="modal-footer">
      <div class="footer-actions">
        <button type="button" class="btn btn-secondary" (click)="onClose()">
          <i class="material-icons">close</i>
          <span>إغلاق</span>
        </button>
        <button type="button" class="btn btn-primary" (click)="onEdit()">
          <i class="material-icons">edit</i>
          <span>تعديل</span>
        </button>
        <button type="button" class="btn btn-danger" (click)="onDelete()">
          <i class="material-icons">delete</i>
          <span>حذف</span>
        </button>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="!category" class="loading-state">
      <div class="loading-spinner"></div>
      <p class="loading-text">جاري التحميل...</p>
    </div>
  </div>

  <!-- Image Zoom Modal -->
  <div
    *ngIf="showImageZoom"
    class="image-zoom-overlay"
    (click)="closeImageZoom()"
  >
    <div class="image-zoom-container">
      <img
        [src]="category?.imageURL"
        alt="{{category?.name}}"
        class="zoomed-image"
      />
      <button class="zoom-close-btn" (click)="closeImageZoom()">
        <i class="material-icons">close</i>
      </button>
    </div>
  </div>
</div>
